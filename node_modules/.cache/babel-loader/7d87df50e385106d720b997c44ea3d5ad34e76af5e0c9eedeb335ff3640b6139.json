{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";const storedCartList=localStorage.getItem(\"cartList\")!==null?JSON.parse(localStorage.getItem(\"cartList\")):[];const initialState={cartList:storedCartList};export const cartSlice=createSlice({name:\"cart\",initialState,reducers:{addToCart:(state,action)=>{const productToAdd=action.payload.product;const quantity=action.payload.num;const productExit=state.cartList.find(item=>item.id===productToAdd.id);if(productExit){state.cartList=state.cartList.map(item=>item.id===action.payload.product.id?{...productExit,qty:productExit.qty+action.payload.num}:item);}else{state.cartList.push({...productToAdd,qty:quantity});}},decreaseQty:(state,action)=>{const productTodecreaseQnty=action.payload;const productExit=state.cartList.find(item=>item.id===productTodecreaseQnty.id);if(productExit.qty===1){state.cartList=state.cartList.filter(item=>item.id!==productExit.id);}else{state.cartList=state.cartList.map(item=>item.id===productExit.id?{...productExit,qty:productExit.qty-1}:item);}},deleteProduct:(state,action)=>{const productToDelete=action.payload;state.cartList=state.cartList.filter(item=>item.id!==productToDelete.id);}}});export const cartMiddleware=store=>next=>action=>{var _action$type;const result=next(action);if((_action$type=action.type)!==null&&_action$type!==void 0&&_action$type.startsWith(\"cart/\")){const cartList=store.getState().cart.cartList;localStorage.setItem(\"cartList\",JSON.stringify(cartList));}return result;};export const{addToCart,decreaseQty,deleteProduct}=cartSlice.actions;export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","storedCartList","localStorage","getItem","JSON","parse","initialState","cartList","cartSlice","name","reducers","addToCart","state","action","productToAdd","payload","product","quantity","num","productExit","find","item","id","map","qty","push","decreaseQty","productTodecreaseQnty","filter","deleteProduct","productToDelete","cartMiddleware","store","next","_action$type","result","type","startsWith","getState","cart","setItem","stringify","actions","reducer"],"sources":["C:/Users/welcome/Downloads/multimart-react-ecommerce-main/multimart-react-ecommerce-main/src/app/features/cart/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst storedCartList =\n  localStorage.getItem(\"cartList\") !== null\n    ? JSON.parse(localStorage.getItem(\"cartList\"))\n    : [];\n\nconst initialState = {\n  cartList: storedCartList,\n};\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const productToAdd = action.payload.product;\n      const quantity = action.payload.num;\n      const productExit = state.cartList.find(\n        (item) => item.id === productToAdd.id\n      );\n      if (productExit) {\n        state.cartList = state.cartList.map((item) =>\n          item.id === action.payload.product.id\n            ? { ...productExit, qty: productExit.qty + action.payload.num }\n            : item\n        );\n      } else {\n        state.cartList.push({ ...productToAdd, qty: quantity });\n      }\n    },\n    decreaseQty: (state, action) => {\n      const productTodecreaseQnty = action.payload;\n      const productExit = state.cartList.find(\n        (item) => item.id === productTodecreaseQnty.id\n      );\n      if (productExit.qty === 1) {\n        state.cartList = state.cartList.filter(\n          (item) => item.id !== productExit.id\n        );\n      } else {\n        state.cartList = state.cartList.map((item) =>\n          item.id === productExit.id\n            ? { ...productExit, qty: productExit.qty - 1 }\n            : item\n        );\n      }\n    },\n    deleteProduct: (state, action) => {\n      const productToDelete = action.payload;\n      state.cartList = state.cartList.filter(\n        (item) => item.id !== productToDelete.id\n      );\n    },\n  },\n});\n\nexport const cartMiddleware = (store) => (next) => (action) => {\n  const result = next(action);\n  if (action.type?.startsWith(\"cart/\")) {\n    const cartList = store.getState().cart.cartList;\n    localStorage.setItem(\"cartList\", JSON.stringify(cartList));\n  }\n  return result;\n};\n\nexport const { addToCart, decreaseQty, deleteProduct } = cartSlice.actions;\n\nexport default cartSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}